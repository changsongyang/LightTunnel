apply plugin: "org.jetbrains.kotlin.jvm"

group = "${rootProject.group}.core"
version = rootProject.version

sourceCompatibility = rootProject.jvm_version

dependencies {
    // Kotlin
    compile "org.jetbrains.kotlin:kotlin-stdlib-jdk8"
    // Netty
    compile "io.netty:netty-buffer:$netty_version"
    compile "io.netty:netty-codec:$netty_version"
    compile "io.netty:netty-codec-http:$netty_version"
    compile "io.netty:netty-common:$netty_version"
    compile "io.netty:netty-handler:$netty_version"
    compile "io.netty:netty-resolver:$netty_version"
    compile "io.netty:netty-transport:$netty_version"
    // Logger
    compile "org.slf4j:slf4j-api:1.7.25"
    // Json
    compile "org.json:json:20190722"
    // 单元测试
    testCompile "junit:junit:4.12"
}


apply plugin: "de.fuerstenau.buildconfig"

buildConfig {
    appName = "LightTunnel"
    version = project.version
    clsName = "_BuildConfig"
    packageName = "${rootProject.group}.internal"
    charset = "UTF-8"

    buildConfigField "int", "VERSION_CODE", "${GitVC.VERSION_CODE}"
    buildConfigField "java.lang.String", "VERSION_NAME", string(project.version)
    buildConfigField "java.lang.String", "LAST_COMMIT_SHA", string(GitVC.LAST_COMMIT_SHA)
    buildConfigField "java.lang.String", "LAST_COMMIT_DATE", string(GitVC.LAST_COMMIT_DATE)
    buildConfigField "java.lang.String", "BUILD_DATA", string(BUILD_DATE)

    buildConfigField "java.lang.String[]", "SERVER_JKS_BASE64", base64File(rootProject.file("resources/lts.jks"))
    buildConfigField "java.lang.String", "SERVER_JKS_STORE_PASSWORD", string("ltspass")
    buildConfigField "java.lang.String", "SERVER_JKS_KEY_PASSWORD", string("ltspass")

    buildConfigField "java.lang.String[]", "CLIENT_JKS_BASE64", base64File(rootProject.file("resources/ltc.jks"))
    buildConfigField "java.lang.String", "CLIENT_JKS_STORE_PASSWORD", string("ltcpass")

}

apply from: rootProject.file("./gradle/common.gradle").absolutePath
apply from: rootProject.file("./gradle/distjar.gradle").absolutePath
apply from: rootProject.file("./gradle/publish.gradle").absolutePath
