apply plugin: "org.jetbrains.kotlin.jvm"

group = "${rootProject.group}.core"
version = rootProject.version

sourceCompatibility = rootProject.jvm_version

dependencies {
    // Kotlin
    compile "org.jetbrains.kotlin:kotlin-stdlib-jdk8"
    // Netty
    compile "io.netty:netty-all:4.1.52.Final"
    // Logger
    compile "org.slf4j:slf4j-api:1.7.25"
    // Json
    compile "org.json:json:20190722"
    // 单元测试
    testCompile "junit:junit:4.12"
}


apply plugin: "de.fuerstenau.buildconfig"

static def s(Object o) { return o.toString() }

buildConfig {
    appName = "LightTunnel"
    version = project.version
    clsName = "BuildConfig"
    packageName = "${rootProject.group}"
    charset = "UTF-8"

    buildConfigField "int", "VERSION_CODE", "${GitVC.VERSION_CODE}"
    buildConfigField "String", "VERSION_NAME", s(project.version)
    buildConfigField "String", "LAST_COMMIT_SHA", s(GitVC.LAST_COMMIT_SHA)
    buildConfigField "String", "LAST_COMMIT_DATE", s(GitVC.LAST_COMMIT_DATE)
    buildConfigField "String", "BUILD_DATA", s(BUILD_DATE)
}

apply from: rootProject.file("./gradle/common.gradle").absolutePath
apply from: rootProject.file("./gradle/distjar.gradle").absolutePath
apply from: rootProject.file("./gradle/publish.gradle").absolutePath